<section class="pay-page-holder">
	<div class="container">
		<div class="pay-page-holder__content">
			<div class="row">

			  <div class="col-lg-6 mb-5" *ngFor="let utility of tariffs">
			    <div class="utility-holder utility-holder--variable" *ngIf = "utility.fixedPayment===false">
			    	
			    	<div class="utility-holder__header">
				    	<h3 class="card-title">{{utility.utilityName}}</h3>
				    </div>

			    	<div class="row utility-holder-content"> 

				      <div class="utility-holder-content__left-side col-6">

				      	<h5>Direct Payment</h5>

				        <input [ngClass]="{'invalid': validatorVariablePaymnetAmount && selectedUtility===utility.utilityName }" type="text" placeholder="Enter payment amount" #amountOfPaymentVariable>
				        <div class="error" [ngClass]="{ 'show': validatorVariablePaymnetAmount && selectedUtility===utility.utilityName,'hide': !(validatorVariablePaymnetAmount && selectedUtility===utility.utilityName) }">
				        	Only numbers allow
				        </div>

			        	<div class="datepicker">
			    				<p>{{currentYear}}</p>
			    				<select class="custom-select" #dateVariable>
			    					<option selected>{{currentMonth + 1 | month}}</option>
			    					<option>{{currentMonth | month}}</option>
			    				</select>
			    			</div>

			    			<ng-template #confirmVariablePayment>
			    				<h4 class="modal-title">Payment Confirmation</h4>
			    				<div class="modal-body text-center">
			    					<p>Are you sure about this payment?</p>
			    					<p>date: {{dateVariable.value}} {{currentYear}}</p>
										<p>utility: {{utility.utilityName}}</p>
			    					<p>Payment amount: {{+amountOfPaymentVariable.value}}</p>
			    					<button type="button" class="button" (click)="addPayment(+amountOfPaymentVariable.value,utility.utilityName,dateVariable.value);modalRef.hide();amountOfPaymentVariable.value='';">Yes</button>
			    					<button type="button" class="button" (click)="modalRef.hide();amountOfPaymentVariable.value='';">No</button>
			    				</div>
			    			</ng-template>

			    			<ng-template #confirmVariableUpdate>
			    				<h4 class="modal-title">Update Confirmation</h4>
			    				<div class="modal-body text-center">
			    					<p>You have already did payment for this:</p>
										<p>date: {{dateVariable.value}} {{currentYear}}</p>
										<p>utility: {{utility.utilityName}}</p>
			    					<p>Are you sure about additional payment?</p>
			    					<p>Payment amount: {{+amountOfPaymentVariable.value}}</p>
			    					<button type="button" class="button" (click)="updatePayment(+amountOfPaymentVariable.value,utility.utilityName,dateVariable.value);modalRef.hide();amountOfPaymentVariable.value='';">Yes</button>
			    					<button type="button" class="button" (click)="modalRef.hide();amountOfPaymentVariable.value='';">No</button>
			    				</div>
			    			</ng-template>

				        <button type="submit" class="button" (click) = "formValidationVariablePayment(+amountOfPaymentVariable.value,utility.utilityName,dateVariable.value,confirmVariablePayment,confirmVariableUpdate);">Pay</button>
				      
				      </div>

				      <div class="utility-holder-content__right-side col-6">

				      	<h5>Calculation</h5>

				      	<input [ngClass]="{'invalid': validatorVariableCalculation && selectedUtility===utility.utilityName }" type="numbers" name="" placeholder="Enter counter amount" #counterForThisMonth >
				      	<div class="error" [ngClass]="{ 'show': validatorVariableCalculation && selectedUtility===utility.utilityName,'hide': !(validatorVariableCalculation && selectedUtility===utility.utilityName) }">
				        	Only numbers allow
				        </div>

				      	<div class="total-holder">
					      	<p>Total:</p>
					      	<span *ngIf="selectedUtility===utility.utilityName">{{totalCalculation}}</span>
					      	<span *ngIf="selectedUtility!=utility.utilityName">{{0}}</span>
				      	</div>

				      	<button type="submit" class="button" (ngSubmit) = "amountOfPaymentVariable.value = totalCalculation" (click) = "formValidationVariableCalculation(counterForThisMonth.value,utility.utilityName);" >Calculate</button> 	
				      
				      </div>
			      </div>

			    </div>

			    <div class="utility-holder utility-holder--fixed" *ngIf = "utility.fixedPayment===true">

			    	<div class="utility-holder__header">
			    		<h3 class="card-title">{{utility.utilityName}}</h3>
			    	</div>

			    	<div class="row utility-holder-conten">    		
			    		<div class="utility-holder-content__left-side col-12">

			    			<h5>Direct Payment</h5>

			    			<input  [ngClass]="{'invalid': validatorFixedPaymnetAmount && selectedUtility===utility.utilityName }" type="text" placeholder="Enter payment amount" #amountOfPaymentFixed>
			    			<div class="error" [ngClass]="{ 'show': validatorFixedPaymnetAmount && selectedUtility===utility.utilityName,'hide': !(validatorFixedPaymnetAmount && selectedUtility===utility.utilityName) }">
				        	Only numbers allow
				        </div>

			    			<div class="datepicker">
			    				<p>{{currentYear}}</p>
			    				<select class="custom-select" #dateFixed>
			    					<option>{{currentMonth + 1 | month}}</option>
			    					<option>{{currentMonth | month}}</option>
			    				</select>
			    			</div>

			    			<ng-template #confirmFixedPayment>
			    				<h4 class="modal-title">Payment Confirmation</h4>
			    				<div class="modal-body text-center">
			    					<p>Are you sure about this payment?</p>
			    					<p>date: {{dateFixed.value}} {{currentYear}}</p>
										<p>utility: {{utility.utilityName}}</p>
			    					<p>Payment amount: {{+amountOfPaymentFixed.value}}</p>
			    					<button type="button" class="button" (click)="addPayment(+amountOfPaymentFixed.value,utility.utilityName,dateFixed.value);modalRef.hide();amountOfPaymentFixed.value='';">Yes</button>
			    					<button type="button" class="button" (click)="modalRef.hide();amountOfPaymentFixed.value='';">No</button>
			    				</div>
			    			</ng-template>

			    			<ng-template #confirmFixedUpdate>
			    				<h4 class="modal-title">Update Confirmation</h4>
			    				<div class="modal-body text-center">
			    					<p>You have already did payment for this:</p>
			    					<p>date: {{dateFixed.value}} {{currentYear}}</p>
			    					<p>utility: {{utility.utilityName}}</p>
			    					<p>Are you sure about additional payment?</p>
			    					<p>Payment amount: {{+amountOfPaymentFixed.value}}</p>
			    					<button type="button" class="button" (click)="updatePayment(+amountOfPaymentFixed.value,utility.utilityName,dateFixed.value);modalRef.hide();amountOfPaymentFixed.value='';">Yes</button>
			    					<button type="button" class="button" (click)="modalRef.hide();amountOfPaymentFixed.value='';">No</button>
			    				</div>
			    			</ng-template>

			    			<button type="submit" class="button" (click) = "formValidationFixedPayment(+amountOfPaymentFixed.value,utility.utilityName,dateFixed.value,confirmFixedPayment,confirmFixedUpdate);">Pay</button>

			    		</div>
			    	</div>
			    </div>
			  </div>

		  </div>

		 <!--  <div class="history-holder">
			  <div class="row" *ngFor="let p of payments">
			  	<div class="col-12 history-items-holder" *ngIf = "historyCounter - p.id < 6">
		  			<div class="row">
			  			<div class="col-3 history-item">{{p.utilityName}}</div>
			  			<div class="col-3 history-item">{{p.year}}</div>
			  			<div class="col-3 history-item">{{p.month | month}}</div>
			  			<div class="col-3 history-item">{{p.amountPayment}}</div>	
		  			</div>
			  	</div>
			  </div>
		  </div> -->

		</div>
	</div>
</section>
