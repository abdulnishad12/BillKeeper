<section class="history-section">
  <div class="container">

    <div class="row mt-5 mb-4">
      <div class="history-section-select col-12">
        <select class="form-control form-control-md" [(ngModel)]="selectedYear" (change)='transformPayments();'>
          <option *ngFor="let year of uniqueYears">{{year}}</option>
        </select>
      </div>
    </div>

    <div class="history-section-holder">
      <div class="row">

        <div class="col-lg-6 col-md-10 col-sm-12 mb-5 animated zoomIn mx-auto" *ngFor="let key of historyDisplay">
          <div class="history-section-holder-utility">
            <div class="row">

              <div class="history-section-utility__card-title col-12">
                <h3>{{ key.month | month }}</h3>
              </div>

              <div class="history-section-utility__left-side col-6">
                <h5>Utilities</h5>
                <ul>
                  <li *ngFor = "let payment of key.payments">{{payment.utilityName}}</li>
                  <li class="strong">All</li>
                </ul>
              </div>

              <div class="history-section-utility__right-side col-6">
                <h5 >Total</h5>
                <ul>
                  <li *ngFor = "let payment of key.payments">{{payment.amountPayment}}</li>
                  <div class="if-holder" *ngFor="let total of totalByMonth">
                    <li *ngIf="key.month===total.month" class="strong">{{total.totalOfMonth}}</li>
                  </div>
                </ul>
              </div>

            </div>
          </div>
        </div>

      </div>
    </div>



  </div>
</section>

<ng-template  #modalWindowIfPaymentsListEmpty>
  <div class="modal-header">
    <h4 class="modal-title">You haven't added any payments yet</h4>
  </div>
  <div class="modal-body text-center">
    <span class="text-center">Do you want to add new payment?</span><br>
    <button type="button" class="button" routerLink="/pay" (click)="modalRef.hide();">Yes</button>
    <button type="button" class="button" (click)="modalRef.hide();">No</button>
  </div>
</ng-template>
