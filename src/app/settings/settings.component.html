<div class="container">

	<div class="add-new-utility-holder">		
		<button class="button"  (click)="openModalWithClass(template)">Add Utility</button>
	</div>

	<div class="utility-tariffs">
		<div class="row">
			<div class="col-lg-6 mb-4" *ngFor="let utility of tariffs;">

				<!-- Variable Price Utility -->
				<div class="utility-tariffs__item" *ngIf = "utility.fixedPayment===false">
					<h3 class="utility-tariffs__card-title">{{utility.utilityName}}</h3>  
					<div class="row">
						<div class="utility-tariffs__input-holder col-6">				
							<input placeholder="Previous month counter" #counterAnount > 
							<input  placeholder="Enter tariff" #tariffAmount >	
						</div>
						<div class="utility-tariffs__data-holder col-6">	
							<p>Previous Month: {{utility.counterForPreviousMonth}}</p>
							<p>Tariff: {{utility.tariff}}</p>
						</div>
					</div>
					<button type ="submit" class="button"  (click) = "onSubmitNewTariff(utility.utilityName,utility.fixedPayment,counterAnount.value,tariffAmount.value);">Submit</button>	
				</div>

				<!-- Fixed Price Utility -->
				<div class="utility-tariffs__item" *ngIf = "utility.fixedPayment===true">
					<h3 class="utility-tariffs__card-title">{{utility.utilityName}}</h3>  
					<div class="row utility-tariffs-content ">
						<div class="utility-tariffs__input-holder col-6">		
							<input  placeholder="Enter fixed price" #fixedPriceInput>
						</div>
						<div class="utility-tariffs__data-holder col-6">	
							<p>Fixed Amount: {{utility.tariff}}</p>
						</div>
					</div>		
					<button class="button"  (click) = "addTariff(utility.fixedPayment,fixedPriceInput.value,utility.utilityName,counterPreviousMonth?.value);">Submit</button>
				</div>

			</div>
		</div>
	</div>


	<ng-template #template>
		<div class="modal-header">
			<h4 class="modal-title pull-left">Add new utility</h4>
			<button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide();addNewUtility.reset();">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="modal-body" [formGroup]="addNewUtility">
			<div class="modal-body__header">
				<span>Utility name:</span>
				<input placeholder="Enter utility Name" formControlName="utilityName">
				<div class="error" *ngIf="isControlInvalidNewUtility('utilityName')">
					<p>Only letter and dash alllow</p>
				</div>
			</div>
			<div class="modal-body__inputs">
				<input  type="checkbox" id="checkbox_id" formControlName="fixedPrice">
				<label for="checkbox_id">Is it suppose to be fixed payment?</label>
			</div>
		</div>
		<div class="modal-footer">
			<button class="button" (click) = "onSubmitnewUtility();modalRef.hide();">Add</button>
		</div>
	</ng-template>

</div>





